{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const fetchImages = async (text, currentPage) => {\n    const searchImages = new URLSearchParams({\n        key: \"45941098-20d6b06978404a6b7356e16b7\",\n        q: text,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: 15,\n        page: currentPage,\n    });\n\n    const response = await\n        axios.get(`https://pixabay.com/api/?${searchImages}`)\n      return response.data\n};","export const renderImages = array => array.map(({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n}) => `<li class=\"gallery-item\">\n<a href=\"${largeImageURL}\">\n<img src=\"${webformatURL}\" class=\"img\" alt=\"${tags}\" />\n</a>\n<div class=\"img-info\">\n    <div>\n    <p class=\"img-info-amounts\">Likes</p>\n    <p class=\"img-info-amounts\">${likes}</p>\n  </div>\n  <div>\n    <p class=\"img-info-amounts\">Views</p>\n    <p class=\"img-info-amounts\">${views}</p>\n  </div>\n  <div>\n      <p class=\"img-info-amounts\">Comments</p>\n      <p class=\"img-info-amounts\">${comments}</p>\n  </div>\n  <div>\n      <p class=\"img-info-amounts\">Downloads</p>\n      <p class=\"img-info-amounts\">${downloads}</p>\n  </div>\n</div>\n</li>`);","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst userForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst loader = () => document.querySelector(\"span\").classList.toggle(\"loader\");\n\nconst warn = () => iziToast.show({\n    message: 'Please fill a field',\n    backgroundColor: 'red',\n    color: 'white',\n});\n\nconst mistake = () => iziToast.show({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    backgroundColor: 'red',\n    color: 'white',\n});\n\nconst finishHits = () => iziToast.show({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    backgroundColor: \"yellow\",\n    color: \"white\",\n});\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\nlet userQuery = '';\nlet currentPage = 1;\n\nconst handleImages = async (event) => {\n    event.preventDefault();\n    userQuery = event.currentTarget.elements.query.value.toLowerCase().trim();\n    if (!userQuery) return warn();\n    gallery.innerHTML = \"\";\n    loadBtn.style.display = \"none\";\n    currentPage = 1;\n    loader();\n    try {\n        const json = await fetchImages(userQuery, currentPage);\n        if (!json.hits.length) return mistake();\n        gallery.insertAdjacentHTML('beforeend', renderImages(json.hits).join(''));\n        lightbox.refresh();\n        currentPage++;\n        loadBtn.style.display = json.totalHits > json.hits.length ? \"block\" : \"none\";\n    }\n    catch (error) {\n        console.log(error);\n    }\n    finally {\n        loader();\n        userForm.reset();\n    };\n};\n\nconst loadImages = async (event) => {\n    if (!userQuery) return warn();\n    loader();\n    try {\n        const json = await fetchImages(userQuery, currentPage);\n        gallery.insertAdjacentHTML('beforeend', renderImages(json.hits).join(''));\n        currentPage++;\n        lightbox.refresh();\n        window.scrollBy({\n            top: 200 * 2,\n            behavior: \"smooth\",\n        });\n        if (gallery.children.length >= json.totalHits) {\n            loadBtn.style.display = \"none\";\n            return finishHits();\n        } else {\n            loadBtn.style.display = \"block\";\n        }\n            \n    }\n    catch (error) {\n        console.log(error);\n    }\n    finally {\n        loader();\n    };\n};\n\nuserForm.addEventListener('submit', handleImages);\nloadBtn.addEventListener('click', loadImages);"],"names":["fetchImages","text","currentPage","searchImages","axios","renderImages","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","userForm","gallery","loadBtn","loader","warn","iziToast","mistake","finishHits","lightbox","SimpleLightbox","userQuery","handleImages","event","json","error","loadImages"],"mappings":"owBAEO,MAAMA,EAAc,MAAOC,EAAMC,IAAgB,CACpD,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACd,CAAK,EAIC,OAFe,MACbE,EAAM,IAAI,4BAA4BD,CAAY,EAAE,GACtC,IACtB,EChBaE,EAAeC,GAASA,EAAM,IAAI,CAAC,CAC5C,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,IAAM;AAAA,WACKL,CAAa;AAAA,YACZD,CAAY,sBAAsBE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKhBC,CAAK;AAAA;AAAA;AAAA;AAAA,kCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAIHC,CAAQ;AAAA;AAAA;AAAA;AAAA,oCAIRC,CAAS;AAAA;AAAA;AAAA,MAGvC,ECtBAC,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAS,IAAM,SAAS,cAAc,MAAM,EAAE,UAAU,OAAO,QAAQ,EAEvEC,EAAO,IAAMC,EAAS,KAAK,CAC7B,QAAS,sBACT,gBAAiB,MACjB,MAAO,OACX,CAAC,EAEKC,EAAU,IAAMD,EAAS,KAAK,CAChC,QAAS,2EACT,gBAAiB,MACjB,MAAO,OACX,CAAC,EAEKE,EAAa,IAAMF,EAAS,KAAK,CACnC,QAAS,6DACT,gBAAiB,SACjB,MAAO,OACX,CAAC,EAEKG,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAC,EAED,IAAIC,EAAY,GACZtB,EAAc,EAElB,MAAMuB,EAAe,MAAOC,GAAU,CAGlC,GAFAA,EAAM,eAAc,EACpBF,EAAYE,EAAM,cAAc,SAAS,MAAM,MAAM,cAAc,OAC/D,CAACF,EAAW,OAAON,IACvBH,EAAQ,UAAY,GACpBC,EAAQ,MAAM,QAAU,OACxBd,EAAc,EACde,IACA,GAAI,CACA,MAAMU,EAAO,MAAM3B,EAAYwB,EAAWtB,CAAW,EACrD,GAAI,CAACyB,EAAK,KAAK,OAAQ,OAAOP,EAAO,EACrCL,EAAQ,mBAAmB,YAAaV,EAAasB,EAAK,IAAI,EAAE,KAAK,EAAE,CAAC,EACxEL,EAAS,QAAO,EAChBpB,IACAc,EAAQ,MAAM,QAAUW,EAAK,UAAYA,EAAK,KAAK,OAAS,QAAU,MACzE,OACMC,EAAO,CACV,QAAQ,IAAIA,CAAK,CACpB,QACO,CACJX,IACAH,EAAS,MAAK,CACtB,CACA,EAEMe,EAAa,MAAOH,GAAU,CAChC,GAAI,CAACF,EAAW,OAAON,IACvBD,IACA,GAAI,CACA,MAAMU,EAAO,MAAM3B,EAAYwB,EAAWtB,CAAW,EAQrD,GAPAa,EAAQ,mBAAmB,YAAaV,EAAasB,EAAK,IAAI,EAAE,KAAK,EAAE,CAAC,EACxEzB,IACAoB,EAAS,QAAO,EAChB,OAAO,SAAS,CACZ,IAAK,IAAM,EACX,SAAU,QACtB,CAAS,EACGP,EAAQ,SAAS,QAAUY,EAAK,UAChC,OAAAX,EAAQ,MAAM,QAAU,OACjBK,EAAU,EAEjBL,EAAQ,MAAM,QAAU,OAG/B,OACMY,EAAO,CACV,QAAQ,IAAIA,CAAK,CACpB,QACO,CACJX,GACR,CACA,EAEAH,EAAS,iBAAiB,SAAUW,CAAY,EAChDT,EAAQ,iBAAiB,QAASa,CAAU"}